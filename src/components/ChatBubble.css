/* ChatBubble */
.chat-bubble { padding: var(--spacing-sm) var(--spacing-md); border-radius: var(--radius-md); max-width: 85%; word-break: break-word; }
.chat-bubble.user { align-self: flex-end; background: var(--color-accent-muted); border-bottom-right-radius: 4px; }
.chat-bubble.assistant { align-self: flex-start; background: var(--color-bg-secondary); border-bottom-left-radius: 4px; }
.chat-bubble.system { align-self: center; background: rgba(59,130,246,0.1); max-width: 90%; text-align: center; font-size: 0.85rem; color: var(--color-text-secondary); }
.chat-bubble.streaming { border-left: 2px solid var(--color-accent); }

/* Header */
.bubble-header { display: flex; align-items: center; gap: var(--spacing-sm); margin-bottom: var(--spacing-xs); font-size: 0.75rem; color: var(--color-text-muted); }
.bubble-role { font-size: 0.9rem; }
.bubble-time { }
.bubble-tokens { background: var(--color-bg-tertiary); padding: 1px 4px; border-radius: 3px; font-size: 0.7rem; }
.bubble-cost { color: var(--color-status-warning); font-size: 0.7rem; }

/* Content */
.bubble-content { font-size: 0.9rem; line-height: 1.5; color: var(--color-text-primary); }
.bubble-content p { margin: var(--spacing-xs) 0; }
.bubble-content a { color: var(--color-accent); text-decoration: none; }
.bubble-content ul, .bubble-content ol { padding-left: 1.2rem; margin: var(--spacing-xs) 0; }
.bubble-text { }

/* Code blocks */
.bubble-code { margin: var(--spacing-sm) 0; border-radius: var(--radius-sm); overflow: hidden; background: var(--color-bg-tertiary); }
.code-header { display: flex; align-items: center; justify-content: space-between; padding: var(--spacing-xs) var(--spacing-sm); background: rgba(0,0,0,0.2); font-size: 0.75rem; color: var(--color-text-muted); }
.code-lang { text-transform: uppercase; font-weight: 600; }
.code-lines { }
.code-content { padding: var(--spacing-sm); overflow-x: auto; margin: 0; }
.code-content code { font-size: 0.8rem; line-height: 1.4; color: var(--color-text-primary); }

/* Diff blocks */
.bubble-diff { margin: var(--spacing-sm) 0; border-radius: var(--radius-sm); overflow: hidden; background: var(--color-bg-tertiary); }
.diff-header { display: flex; align-items: center; justify-content: space-between; padding: var(--spacing-xs) var(--spacing-sm); background: rgba(0,0,0,0.2); font-size: 0.75rem; color: var(--color-text-muted); }
.diff-content { padding: var(--spacing-sm); overflow-x: auto; margin: 0; font-size: 0.8rem; }
.diff-line { display: block; }
.diff-line.added { color: var(--color-status-online); background: rgba(34,197,94,0.1); }
.diff-line.removed { color: var(--color-status-error); background: rgba(239,68,68,0.1); }
.diff-line.hunk { color: var(--color-status-info); font-weight: 600; }

/* Tool calls */
.bubble-tools { display: flex; flex-wrap: wrap; gap: var(--spacing-xs); margin-top: var(--spacing-sm); }
.tool-call-card { display: flex; align-items: center; gap: var(--spacing-xs); padding: var(--spacing-xs) var(--spacing-sm); background: var(--color-bg-tertiary); border: 1px solid var(--color-border); border-radius: var(--radius-sm); font-size: 0.8rem; cursor: pointer; min-height: 36px; color: var(--color-text-primary); transition: var(--transition-fast); }
.tool-call-card:hover { border-color: var(--color-accent); }
.tool-call-card.running { border-color: var(--color-status-info); }
.tool-call-card.error { border-color: var(--color-status-error); }
.tool-icon { font-size: 0.9rem; }
.tool-name { font-weight: 500; }
.tool-duration { color: var(--color-text-muted); font-size: 0.75rem; }

/* Inline approval */
.bubble-approval { margin-top: var(--spacing-sm); padding: var(--spacing-sm); background: rgba(245,158,11,0.1); border: 1px solid rgba(245,158,11,0.3); border-radius: var(--radius-sm); }
.approval-desc { margin: 0 0 var(--spacing-sm); font-size: 0.85rem; }
.approval-actions { display: flex; gap: var(--spacing-sm); }

/* Inline tool cards */
.bubble-tools-inline { display: flex; flex-direction: column; gap: var(--spacing-xs); margin-top: var(--spacing-sm); }

/* Inspect button */
.bubble-inspect-btn { display: inline-flex; align-items: center; gap: 4px; margin-top: var(--spacing-sm); padding: 3px 10px; border: 1px solid var(--color-border); border-radius: 12px; background: transparent; color: var(--color-text-muted); font-size: 0.72rem; cursor: pointer; transition: var(--transition-fast); }
.bubble-inspect-btn:hover { border-color: var(--color-accent); color: var(--color-accent); }

/* Streaming dots */
.bubble-streaming { display: flex; gap: 4px; padding: var(--spacing-xs) 0; }
.streaming-dot { width: 6px; height: 6px; border-radius: 50%; background: var(--color-accent); animation: streaming-pulse 1.2s ease-in-out infinite; }
.streaming-dot:nth-child(2) { animation-delay: 0.2s; }
.streaming-dot:nth-child(3) { animation-delay: 0.4s; }
@keyframes streaming-pulse { 0%, 80%, 100% { opacity: 0.3; transform: scale(0.8); } 40% { opacity: 1; transform: scale(1); } }

/* Cost label */
.bubble-cost-label { display: flex; justify-content: space-between; align-items: center; padding: 4px 8px; margin-top: 6px; border-radius: 6px; font-size: 0.75rem; cursor: pointer; transition: background 0.2s; }
.bubble-cost-label:hover { filter: brightness(1.2); }
.bubble-cost-label.cost-low { color: var(--color-text-secondary); background: transparent; }
.bubble-cost-label.cost-medium { color: #f0ad4e; background: rgba(240,173,78,0.08); }
.bubble-cost-label.cost-high { color: #f44336; background: rgba(244,67,54,0.08); }
.cost-expand-icon { font-size: 0.65rem; opacity: 0.6; }
.bubble-cost-detail { padding: 6px 8px; margin-top: 2px; border-radius: 6px; background: var(--color-bg-tertiary, rgba(255,255,255,0.04)); font-size: 0.72rem; }
.cost-detail-row { display: flex; justify-content: space-between; padding: 2px 0; opacity: 0.8; }
