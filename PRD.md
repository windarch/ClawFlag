# ClawFlag 产品定义文档 v4.0 (中文版)

**产品标语：洞察你的 AI，掌控于指尖。**

**移动端 AI Agent 指挥中心**

*版本 4.0 | 最终版 | 整合 26 位专家 3 轮评审建议 | 2026年2月*  
*clawflag.com · bitflag.com*  
*机密文件*

---

## 0. 核心哲学 — 产品理念

> 🎯 **AI 为人服务，而非反之。**

我们坚信，AI 的安全与可信，离不开一个持久、不可中断的“人类在环”（Human-in-the-Loop）机制。而“人类在环”若要有效运作，其本身必须足够便捷。

整个 ClawFlag 产品建立在三大基石信念之上：

**信念一：AI 安全需要“人类在环”**

最危险的 AI 不是会犯错的 AI，而是在无人监管时犯错的 AI。OpenClaw 赋予了用户一个强大的自主 Agent。这个 Agent 能够阅读邮件、执行代码、管理文件、调用 API，甚至花费真金白银——每周7天，每天24小时，无论你是否在场。

根据 SecurityScorecard STRIKE 在2026年2月的报告，超过 **135,000** 个 OpenClaw 实例暴露在公网上 [1]。其中超过 **50,000** 个存在可利用的远程代码执行（RCE）漏洞。Koi Security 的数据显示，ClawHub 中存在超过 **824** 种恶意技能 [2]。微软的安全团队明确指出：“应将 OpenClaw 视为拥有持久化凭证的不可信代码执行环境。” [3]

我们认为，答案不是停止使用 AI Agent，而是确保始终有一个人类在观察、被告知，并始终掌握控制权。

**信念二：“人类在环”需要便利性**

如果所谓的“控制面板”是一个需要 SSH 登录和编辑 Markdown 文件的终端窗口，那它就毫无意义。人类必须能在任何时刻触达他们的 Agent——在地铁上、在会议中、在凌晨两点的床上。**这就是为什么 ClawFlag 必须是一个移动端 App。**

便利性的两大支柱：

*   **对话交互 (Chat):** 你的手机必须成为与 Agent 对话、分配任务、接收结果的头等界面——其流畅度应媲美在微信或 Telegram 上与人类同事沟通，绝不能是降级体验。
*   **控制面板 (Control Panel):** 你的手机必须提供一个清晰、实时的仪表盘，让你在3秒内了解 Agent 在做什么、花了多少钱、是否安全，并提供一个你能在3秒内按下的“紧急停止”按钮。

如果人类无法便捷地行使控制权，“人类在环”就沦为一个营销口号，而非安全机制。

**信念三：AI 服务于人——人类是委托人**

在我们的长期愿景（BitFlag 网络）中，AI Agent 将代表其人类所有者与其他 AI Agent 互动——谈判、交易、协作。但在每一次互动中，人类所有者都是**委托人 (Principal)**。Agent 在人类设定的边界内行事。每一笔跨 Agent 的交易都会在人类的手机上弹出以供批准。每一个决策链都可追溯、可审计。

这就是 ClawFlag 这个名字的含义：**Flag** 是你的 Agent 带向世界的身份标识——但**是你插上了那面旗帜**。你决定它去向何方，你决定它何时止步。

> 💡 **一言以蔽之**
> 我们坚信，AI 安全需要人类在环；人类在环需要移动端的便利性（一个能与 AI 对话并控制它的手机 App）；归根结底，AI 的存在是为了服务于人类——而不是取代人类的判断。

## 1. 愿景

**洞察你的 AI，掌控于指尖。**

让任何 OpenClaw 用户都能在 **3秒** 内通过移动设备看到其 Agent 的状态、开销和风险，并在 **30秒** 内完成任何控制操作。

ClawFlag 不存储你的数据，不中继你的消息，不触碰你的凭证。它是你 Gateway 的移动端眼睛和手指——仅此而已，别无其他。

**北极星：** ClawFlag (工具层) → BitFlag 网络 (Agent 社交层)

## 2. 目标用户

我们明确**不**针对“不懂命令行的休闲用户”。OpenClaw 的维护者自己也警告说，命令行知识是安全使用的先决条件。我们的用户有能力，但缺乏耐心。

| 层级 | 用户画像 | 核心需求 |
|:---|:---|:---|
| **P0 (70%)** | **技术非专家** | 能看到 Agent 在做什么，能控制成本，而无需打开终端 |
| | 能安装 OpenClaw，配置好 API 密钥，通过 Telegram 聊天。但不想 SSH 进去编辑 Markdown。 |
| **P1 (20%)** | **多 Agent 运营者** | 成本优化，模型路由，多 Gateway 管理 |
| | 运行3个以上的 Agent。通常是 AI 团队或 DevOps 工程师。需要路由优化和成本控制。 |
| **P2 (10%)** | **仪表盘观察者** | 自动化的“每周文摘”报告，通过邮件或 Telegram 发送 |
| | 从不接触配置。只关心：花了多少钱？发生了什么？有没有问题？ |

## 3. 最初五分钟 — 用户旅程

以下任何一步出现问题，产品即宣告失败。这是 MVP 的验证清单。

**✅ 理想路径**

1.  **安装 (15秒):** 用户在 OpenClaw Discord 中发现链接 → 打开 clawflag.com → “添加到主屏幕” (PWA)。
2.  **连接 (30秒):** 输入 Gateway 地址 (IP:18789) → 粘贴 Token → 通过探针指纹自动检测 Gateway 版本 → 显示绿色 ✔ “已连接”。
3.  **初见 (3秒):** 自动跳转到“脉搏”标签页 → “概览视图”点亮 (状态 / 开销 / 待审批事项) + 一句话描述当前任务。
4.  **安全检查 (10秒):** 第二屏：Gateway 安全报告。非阻塞。严重问题（如 RCE 漏洞 / 公网暴露）以红色横幅显示；其他问题以黄色卡片显示。用户可跳过，但系统会在“脉搏”标签页中持续提醒。
5.  **首次操作 (60秒):** 用户看到成本偏高 → 点击进入“路由”标签页 → 看到“成本顾问”的建议 → 一键“应用” → “这东西有用。”

**❌ 失败路径 (必须为此设计)**

*   **连接超时:** 显示“请检查 Gateway 地址” + 链接到故障排除指南。
*   **Gateway 版本 < 2026.1.30:** 红色警告：“你的 Gateway 存在已知的安全漏洞 (CVE-2026-25253)。” + 链接到升级指南。允许连接，但显示持久性横幅。
*   **概览视图为空:** 没有空状态。显示：“你的 Agent 还没有活动。发送第一条消息试试？” + 跳转到“对话”标签页的快捷方式。
*   **Token 过期/无效:** 清晰的错误信息 + 一键重新输入 Token。

## 4. 竞争优势

按防御性排序，而非功能新颖性。已与9个社区仪表盘进行交叉验证。每个功能都标明了可用阶段：
`[PWA]` = PWA MVP 中可用 `[Native]` = 需要原生 App `[PWA↓]` = 在 PWA 中体验降级

**① 零云数据主权** `[PWA]`
所有数据都保留在用户的 Gateway 上。ClawFlag 不在任何第三方服务器上存储任何用户数据。这是与 Clawctl (每月$49的托管服务) 的根本区别，也是 OpenClaw 用户选择 OpenClaw 而非 ChatGPT 的原因。

**② 3秒概览视图 + 推送警报** `[PWA↓]`
三个数字 (Agent 状态 / 今日开销 / 待审批事项) + 一句话 (当前任务 + 进度)。可作为：App 主屏幕 `[PWA]`、iOS 小组件 `[Native]`、Android 通知卡片 `[Native]`、Apple Watch 表盘复杂功能 `[Native]`。当 PWA 推送不可靠时（尤其是 iOS Safari），通过 Telegram Bot 作为备用推送通道。

**③ 三层成本熔断器** `[PWA]`
*   **警告层 (70% 预算):** 黄色警报。通过 App + Telegram Bot 通知用户。
*   **降级层 (90% 预算):** ClawRouter 自动切换到更便宜的模型 (Opus → Sonnet → Haiku)。定时任务强制使用最便宜的模型。
*   **熔断层 (100% 预算):** 推送通知 + 暂停所有非手动会话。只保留用户发起的聊天。一键解除。

**④ Gateway 安全审计** `[PWA]`
首次连接及之后定期运行，ClawFlag 会根据一个版本化的安全检查清单 API（托管在 CDN 上，随新 CVE 出现而更新）进行自动安全检查：
*   **版本检查:** Gateway 是否 ≥ 2026.1.30？(CVE-2026-25253 / CVE-2026-24763 是否已修补？)
*   **暴露检查:** Gateway 是否绑定到 0.0.0.0 或可从公网访问？
*   **认证检查:** 是否启用了身份验证？是否配置了 `trustedProxies`？
*   **技能审计:** 将已安装的技能与 ClawHavoc IoC 数据库（社区驱动 + Koi Security 数据源）进行交叉比对。
*   **成本异常检测:** 是否有任何会话消耗的 token 超过历史平均值的3倍？(可能表示提示注入攻击)

红色问题（已知的未修补 RCE）显示为持久性横幅。黄色问题作为改进卡片。为每个问题提供一键修复指导。

**⑤ 技能护盾 (Skill Shield)** `[PWA]`
Bitdefender 确认，20% 的 ClawHub 技能是恶意的 [4]。微软：“安装一个技能基本上就是安装特权代码。” **技能护盾不是可选项——它是硬性要求：**
*   **安装前:** 静态分析（代码扫描 + ClawHavoc IoC 匹配）+ 权限声明 + 社区声誉评分。
*   **安装后:** 行为沙箱监控（文件访问日志、网络请求、API 调用频率）。
*   **更新时差异对比:** 当已安装的技能有可用更新时，自动对比新旧版本差异，高亮显示新的网络请求、凭证访问、SOUL.md 修改。
*   **异常响应:** 自动隔离 + 推送警报 + 一键回滚所有文件更改 + 社区报告。

将独立发布一个开源的命令行工具 `claw-audit` 以获取社区信任。

**⑥ 分层零配置** `[PWA]`
P0 用户永远不会看到第2层以上。配置的复杂性被隐藏，而不是被移除：
*   **第0层 (始终可见):** 一句话人格摘要（从 SOUL.md 自动提取）+ 记忆健康度条。
*   **第1层 (轻点一下):** 人格面板（SOUL 语调滑块 + IDENTITY 卡片）、我的信息（USER.md 表单）。
*   **第2层 (长按 / 高级):** AGENTS.md 规则编辑器、TOOLS.md 环境、HEARTBEAT.md 时间线。
*   **第3层 (开发者模式):** 原始 Markdown 编辑器、Git 差异对比、BOOT.md 钩子。

**⑦ ClawRouter: 可视化模型路由** `[PWA (文本) / Native (拖拽)]`
MVP：基于文本的模型路由配置。第二阶段：拖放式 UI。备用链。决策预览。**成本顾问引擎**：“将这个定时任务切换到 Sonnet = 每月节省 ¥175。” 一键应用。连接到 OpenRouter Usage API 以获取精确成本数据（可选，Pro 功能）。

**⑧ 超越 Telegram 的对话体验** `[PWA]`
*   **执行链路透视 (Show Your Work):** **【专家建议】** 在每个 Agent 回复的气泡旁增加一个“探查”按钮。点击后，以时间线或流程图的方式清晰展示该任务的思考链（thoughts）、工具调用（tool calls）、API 耗时和关键决策点，彻底打破“黑盒子”感。
*   **工具调用内联卡片:** 浏览器截图缩略图、文件操作差异对比、可折叠的 shell 输出块。
*   **单条消息成本标签:** 在每条消息上显示 token 消耗。
*   **危险操作内联批准按钮。**
*   **多步骤进度条 (第 2/5 步)。**
*   **上下文压缩警告条 + 一键压缩按钮。**
*   **手动“总结此会话”按钮** (长按消息输入区)。
*   **紧急停止按钮:** **【专家建议】** 一个高可见度的、常驻的“紧急停止”浮动按钮，允许用户在发现 Agent 行为失控时（如陷入循环、执行危险操作）立即“拉电闸”，给予用户最终的控制权和安全感。

**⑨ Agent 每周文摘** `[PWA]` (Pro)
自动生成的每周摘要，通过推送或 Telegram 发送：已完成任务、总开销、成本趋势、安全事件、模型使用分布。专为 P2 (仪表盘观察者) 用户设计，他们无需打开 App。

## 5. 信息架构

**底部标签栏结构**

| 标签 | 图标 | 功能 |
|:---|:---:|:---|
| **对话** | 💬 | 与 Agent 的对话，包含内联工具卡片、成本标签、批准按钮。多 Agent 设置的 Agent 选择器。手动总结按钮。|
| **脉搏** | 📊 | 概览视图 (状态/开销/审批) + 实时监控：会话列表、定时任务状态、子 Agent 有向无环图、上下文窗口计量器、模型备用链事件流。持久性安全横幅。成本异常警报。|
| **大脑** | 🧠 | 记忆浏览器 (每日时间线 + 语义搜索 + 保真度评分环) + 配置编辑器 (L0–L3 分层暴露)。记忆和配置是统一的，因为记忆即配置。|
| **路由** | ⚡ | ClawRouter 模型路由 (文本 MVP / 拖拽 P2) + 备用链 + 成本顾问建议 + 预算设置 + 熔断器控制 + OpenRouter API 集成 (Pro)。|

*   **通知:** 全局铃铛图标（右上角），不是一个单独的标签页。可从任何屏幕访问。
*   **危险操作批准:** 全屏模态浮层，不属于任何标签页。
*   **Telegram Bot 备用通道:** 当 App 在后台或离线时，所有关键通知也会通过 @ClawFlagBot 在 Telegram 上发送。

## 6. 技术架构

**6.1 协议适配器层 (关键)**

OpenClaw 的 Gateway WebSocket 协议几乎每周都在变。直接耦合 = 每次更新都会崩溃。

**部署拓扑**

*   **MVP (第一阶段):** App 内嵌。适配器逻辑作为 JS 模块在 PWA/React Native 内部。零额外部署。适配器映射表作为远程配置（CDN 托管的 JSON），通过 CodePush 热重载更新，无需发布完整 App。
*   **第二阶段:** Sidecar 模式。在 Gateway 机器上运行一个轻量级 Node.js 进程。暴露稳定的 REST/WS API。App 从不处理协议变更。
*   **第三阶段 (SaaS):** 托管适配器。云代理的适配器。仅数据传输，零存储。成为付费产品。

**版本检测**

在 WebSocket 连接时，发送探针消息 (`/system/info` 或 `/tools/list`)。从响应包的指纹（字段名、结构）检测 Gateway 版本。在远程配置中维护指纹 → `adapter_version` 的映射表。

**6.2 安全模型**

基于最新的威胁情报 (CVE-2026-25253, ClawHavoc, 135K+ 暴露实例, 微软安全指南 2026年2月19日):

*   **零信任传输:** App 和 Gateway 之间使用 WireGuard/Tailscale 隧道或 WSS + mTLS。
*   **零存储:** ClawFlag 服务器上不存储任何用户数据。句号。
*   **跨站 WebSocket 劫持保护:** 验证 Origin 头，实现 CSRF Token 绑定，拒绝未经授权的连接重定向 (CVE-2026-25253 攻击向量)。
*   **本地加密缓存:** iOS Keychain / Android Keystore 用于本地缓存数据。
*   **生物识别确认:** 编辑 SOUL.md、删除记忆、安装技能、覆盖预算时需要。
*   **版本化的安全检查清单 API:** `clawflag.com/api/security-rules.json` 托管在 CDN 上。App 启动时自动拉取。社区和第三方工具也可以使用。
*   **实时入侵检测:** 监控 Gateway 日志流，检测意外的 `/tools/invoke` 调用、突然的模型切换、凭证文件访问、未经授权的 WebSocket 连接。

**6.3 缓存层级**

| 层级 | 数据 | 策略 |
|:---|:---|:---|
| **L1** | 当前会话（最后50条消息）、今日 token/成本摘要、Gateway 健康度、HEARTBEAT 状态 | 缓存 + 实时 WebSocket 推送更新 |
| **L2** | 历史会话、`memory/YYYY-MM-DD.md`、技能列表、`SOUL.md`/`AGENTS.md` | 按需加载，24小时后驱逐 |
| **L3** | `credentials/`、完整的 JSONL 脚本、`auth-profiles.json` | **永不缓存**。太大 + 太敏感。|

**同步策略:** 连接时通过 WebSocket 实时推送；重新连接时增量差异同步。Gateway 是唯一的事实来源。离线用户的编辑存储为待处理更改；重新连接时，如果存在冲突，差异比较 UI 让用户选择。如果待处理更改 > 5项，显示批量审查页面，而不是逐项弹窗。

**6.4 连接管理器 (移动端)**

三种操作模式，自动切换：

*   **前台:** WebSocket 长连接 + 15秒心跳 + 网络切换时自动重连（指数退避）。
*   **后台 (原生):** 断开 WebSocket → 切换到轮询 (每5分钟 HTTP GET `/status`) → 异常时推送通知。
*   **省电模式:** 完全断开。只有推送通知（通过 Telegram Bot 或 FCM/APNs）可以唤醒。

**Telegram Bot 通知规则:** App 在前台 = 仅 App 内通知。App 在后台/离线 = Telegram。严重警报（RCE / 预算熔断 / 可疑技能）= 两个渠道同时发送。

**6.5 多 Gateway 和多 Agent**

第一天：单个 Gateway，多 Agent 切换 (`workspace-alex` / `workspace-mia`)。第二阶段：多 Gateway 管理。Agent-频道绑定可视化。

**6.6 技术栈**

| 类别 | 技术 |
|:---|:---|
| **框架** | React Native + Expo (PWA 优先，然后原生包装)。CodePush 用于热更新。|
| **通信** | WebSocket (Gateway WS) + REST 备用 + 远程配置 (CDN JSON) |
| **本地存储** | SQLite (加密，用于 L1/L2 缓存) |
| **推送** | FCM / APNs (通过轻量级中继) + Telegram Bot 备用 (@ClawFlagBot) |
| **安全隧道** | Tailscale SDK / WireGuard |
| **图表** | Victory Native / fl_chart |
| **Markdown** | react-native-markdown-display |
| **认证** | Gateway Token + 生物识别 (FaceID/指纹) |

## 7. 记忆智能

**7.1 三阶段压缩**

所有 LLM 调用都通过 Gateway 的 `/tools/invoke` 执行——ClawFlag 始终是纯粹的代理，与核心理念保持一致。

1.  **预压缩摘要:** 当会话 token 使用量达到 `softThresholdTokens` 的 80% 时（通过实时 `token_usage` 事件监控），ClawFlag 向 Gateway 发送指令：“使用 Haiku 对此会话生成结构化摘要。” 结果在本地 L1 缓存。
2.  **压缩质量检查:** OpenClaw 原生刷新完成后，比较刷新前后的实体保留情况。**记忆保真度分数** = (刷新后摘要中的命名实体 / 刷新前摘要中的命名实体) × 100%。如果 < 80%，自动将缺失的实体追加到记忆文件中。
3.  **记忆垃圾回收:** 每周扫描 `memory/` 目录。将30天以上未被 `memory_search` 检索的每日笔记标记为可归档。用户一键确认清理。

**手动触发:** 在对话标签页长按 → “总结此会话”。随时可用，不仅限于接近阈值时。

**7.2 记忆保真度可视化**

在“大脑”标签页中，每个每日记忆条目都显示一个小的环形计量器，指示保真度分数。绿色 > 80%，黄色 60–80%，红色 < 60%。用户可以点击查看哪些实体被保留/丢失，并带有一个“是否错过了重要内容？”的反馈按钮，用于持续改进。

**7.3 成本顾问引擎**

不仅仅是成本显示——提供可操作的优化建议和具体的投资回报率：

**数据管道**

*   **来源 1:** Gateway WebSocket 事件流 (工具调用完成：模型、使用 token 数、持续时间)
*   **来源 2:** 会话 JSONL 元数据头 (开始时间、结束时间、总 token 数)
*   **来源 3:** `openclaw.json` 模型解析器配置 (模型定价)
*   **来源 4:** `cron/jobs.json` 执行历史
*   **来源 5 (Pro, 可选):** OpenRouter Usage API (`/api/v1/credits`) 获取精确的按密钥计费数据

数据在 L1 缓存中聚合为 `cost_summary_today` 和 `cost_history_7d`。MVP 使用硬编码规则，而非机器学习。

**建议示例**

*   **模型建议:** “你的 `cron-daily-news` 使用 Opus (每次运行 ¥6)。历史数据显示 Sonnet 能达到同样质量。切换可每月节省约 ¥175。”
*   **心跳优化:** “你的心跳每30分钟运行一次，但92%的时间返回 `HEARTBEAT_OK`。调整为每2小时一次可每月节省约 ¥85。”
*   **成本异常警报:** “会话 #47 消耗了平均3.2倍的 token。可能存在提示注入攻击。需要审查吗？”

每个建议都有一个“应用”按钮，可直接修改 OpenClaw 配置。免费用户可以看到建议标题，但具体细节模糊化（“升级 Pro 解锁（用户平均每月节省 ¥160）”）。

## 8. 长期愿景：BitFlag 网络

本节是战略北极星。**不属于 MVP 的一部分。** 包含此内容是为了为今天做出的架构决策提供方向性背景。

**8.1 论点**

Moltbook 证明了 Agent 社交网络有真实需求：160万个 Agent 被认领 (2026年2月)。它也证明了不受控制的 Agent 网络是一场安全灾难 (404 Media：未受保护的数据库；Palo Alto Networks：“下一个 AI 安全危机”)。机会在于：**构建 Moltbook 本应成为的网络——受管理、可审计、由人类控制。**

> 🔬 **IBM 研究院 (Kaoutar El Maghraoui)**
> “许多 Agent 在一个受管理的协调结构内互动，在那里它们可以被发现、路由、监督和受策略约束。” —— 这精确地描述了 BitFlag 网络的最终状态。

**8.2 演进路径：ClawRouter → Agent Router**

1.  **ClawRouter** 管理模型路由 (“哪个模型处理哪个任务”)
2.  扩展到**服务路由** (“哪个外部 Agent/服务处理哪个任务”)
3.  扩展到 **Agent 发现** (“我的 Agent 可以与谁互动”) → Agent 地址簿
4.  扩展到 **Agent-to-Agent 交易** (“我的 Agent 代表我进行谈判/交易/协作，在授权范围内”)

**8.3 Agent 身份协议**

基于 Google A2A (Agent-to-Agent) 协议，并扩展了：

*   **BitFlag Agent 卡片** = A2A Agent 卡片 + 所有者 DID (通过 ClawFlag OAuth) + 声誉评分 + 批准策略
*   **所有者验证:** Agent 身份锚定到人类的 ClawFlag 账户 (GitHub/Google/Apple OAuth)
*   **能力证明:** Agent 声明技能、语言、专业领域。通过测试互动进行验证。
*   **声誉累积:** 基于成功的跨 Agent 任务、完成率、所有者评级。

**8.4 Agent 社交的三级审批**

平衡效率与安全：

*   **第0级 (自动通过):** 白名单 Agent 之间的信息查询。
*   **第1级 (通知 + 自动执行):** 预算内、规则内的任务。推送通知但不阻塞。
*   **第2级 (强制批准):** 金钱、敏感数据、首次 Agent 联系、超预算操作。全屏模态框：人类必须 ✔ 或 ✖。

每一次 Agent-to-Agent 互动都会生成一个人类可读的摘要（“你的 Agent 向 @LegalBot 咨询了合同条款。回复：3条建议。成本：¥0.85。”）。没有人类可理解的摘要，批准按钮就毫无意义。

**8.5 品牌架构**

| 品牌 | 域名 | 含义 |
|:---|:---|:---|
| **ClawFlag** | clawflag.com | **工具层。** Claw = OpenClaw。Flag = 你的 Agent 的身份标识。|
| **BitFlag** | bitflag.com | **网络层。** Bit = 数字原生 / 最小单位 / 加密。Flag = 网络中的身份。|

## 9. 成功指标

**北极星指标**

每周至少查看一次“概览视图”的活跃用户数（“概览率”）

**AARRR 漏斗**

*   **获取 (Acquisition):** 来源渠道 (Discord/PH/V2EX/搜索) × 安装转化率
*   **激活 (Activation):** “首次成功连接 Gateway” 完成率。“首次看到概览视图” 完成率。
*   **留存 (Retention):** D1/D7/D30 留存率，按 P0/P1/P2 细分。
*   **收入 (Revenue):** Pro 试用率 → 付费转化率 → 续订率。
*   **推荐 (Referral):** GitHub star-to-install 比率。Agent 统计卡片分享率。

**阶段目标**

*   **MVP (0–3个月):** 500 DAU，被 OpenClaw Discord #showcase 推荐，概览视图理解度 > 90%。
*   **增长 (3–6个月):** 5,000 DAU，7天留存率 > 40%，Pro 转化率 > 5%，协议适配器被2个以上社区项目采用。
*   **生态 (6–12个月):** 获得 OpenClaw 基金会官方伴侣应用推荐。跨框架支持。中国 MAU > 2,000。

## 10. 商业化

**10.1 三层商业模型**

| | 第1层：工具 | 第2层：平台 | 第3层：网络 |
|:---|:---|:---|:---|
| **时间线** | 0–12个月 | 6–18个月 | 12–36个月 |
| **产品** | ClawFlag PWA/App | ClawFlag SDK + 协议适配器 | BitFlag 网络 |
| **收入** | 开源核心：免费 + Pro (¥68/月) + 团队版 (¥198/月/席) | 托管适配器 (SaaS) + 企业私有网络 | API 调用计费 (Twilio 模式) |
| **宣传语** | “Agent Ops 移动仪表盘” | “AI Agent 的 Datadog” | “Agent 经济的 Stripe + LinkedIn” |
| **资金** | 自力更生 | 种子前/种子轮：¥200-700万 | A轮：¥3500-1亿 |
| **触发点** | 立即开始 | PMF：2000 DAU, NPS > 50 | 第2层成为生态标准 |

**10.2 定价逻辑**

*   **免费版:** 单个 Gateway + 单个 Agent + 概览视图 + 基础对话 + 7天历史。覆盖 80% 的 P0 需求。
*   **Pro 版 (¥68/月 | ¥680/年):** 成本顾问完整细节 + 技能护盾高级版 + 多 Agent + 30天历史 + 每周文摘 + OpenRouter API 集成。投资回报逻辑：花 ¥68，节省 ¥175+。
*   **创始人计划 (限量，前200名用户):** ¥399/年终身。早期采用者成为社区布道者。
*   **团队版 (¥198/月/席):** 多 Gateway + RBAC + 审计日志 + 共享路由模板 + 团队成本仪表盘。

**免费 → Pro 激活:** 成本顾问在免费版中显示建议标题，但模糊化具体细节和“应用”按钮。用户看到：“发现1个优化项——升级 Pro 解锁（用户平均每月节省 ¥160）。”

**10.3 中国市场适配**

*   **国内模型支持:** DeepSeek, Qwen (通义), GLM 作为 ClawRouter 目标
*   **连接层:** SOCKS5/Clash 代理配置，用于访问海外 Gateway
*   **数据本地化:** 记忆和会话缓存仅保留在设备上
*   **分发:** PWA (避免应用商店审核风险)
*   **中文 SOUL.md 模板库**，用于快速设置 Agent 人格

## 11. 市场进入策略 (GTM)

**【专家建议】**

**KOL 冷启动策略：优先服务“自己人”**

在冷启动阶段，将重心放在为社区中最有影响力的大神（Power Users）解决问题上。主动联系 Pawel Jozefiak (WizBoard 作者)、Dan Cleary (Wren OS 作者) 等人，为他们提供 ClawFlag 的早期版本，并根据他们的反馈进行迭代。这些大神在社区中一言九鼎，他们的推荐比任何市场营销都有效。**先服务好 100 个铁杆粉丝，再考虑 10000 个普通用户。**

**增长钩子 (按优先级排序)**

1.  **P0 (与 MVP 一同发布):** `claw-audit` 安全扫描命令行工具。一个命令检查你的 Gateway 安全性。输出报告 + 指向 ClawFlag “一键修复”的链接。开发成本最低，转化率最高（恐惧驱动）。仅扫描用户自己的实例（法律安全）。
2.  **P1 (MVP + 2周):** “我的 Agent 统计”社交卡片。你的 Agent 的 Spotify Wrapped。可分享的卡片：“47个任务 / 花费 ¥85 / 主要模型：Sonnet。” 品牌水印 + 下载链接。病毒循环。
3.  **P2 (增长阶段):** OpenClaw 成本计算器网页工具。SEO 获取流量。输入 Agent 配置 → 计算每月成本 → 优化提示 → CTA：“安装 ClawFlag 自动优化。”

**冷启动渠道 (0–500 DAU)**

*   在 OpenClaw Discord #showcase 中记录构建日志
*   GitHub README 中附上5秒演示 GIF (概览视图)
*   Product Hunt 发布
*   V2EX / 少数派 / 即刻 App / 小红书 / B站 用于中国市场
*   渗透现有的微信/Telegram OpenClaw 群组——提供免费安全检查，自然引流

**增长阶段 (500–5,000 DAU)**

*   ClawRouter 可视化演示作为独立的网页体验
*   与 OpenClaw 基金会接洽，争取官方伴侣应用列表推荐

**生态锁定 (5,000+ DAU)**

*   开源 `@clawflag/core` SDK (协议适配器 + 监控原语)
*   提议“OpenClaw 健康评分”作为社区标准指标
*   跨框架扩展 (AutoGen, CrewAI, LangGraph)

**PWA → 原生 App 触发条件 (满足以下任意2项):**

*   DAU > 2,000 且 7天留存率 > 40%
*   付费用户 > 100
*   3个以上社区请求原生功能（小组件、手表、可靠推送）

## 12. 开发者生态

**12.1 SDK 架构 (第一天起就自用)**

ClawFlag App 本身就使用该 SDK——确保它在公开发布前经过实战检验：

*   `@clawflag/core` (~5KB): Gateway 连接、认证、版本检测、心跳。最小可行单元。
*   `@clawflag/monitor` (~15KB): 实时事件订阅 (工具调用、会话开始、成本更新、错误)。概览视图数据聚合。
*   `@clawflag/control` (~20KB): 配置读/写 (SOUL/AGENTS/USER)、技能管理、会话控制、ClawRouter 规则 CRUD。

每个包独立发布。社区仪表盘可以基于 core + monitor 构建，而无需接触 control。

**12.2 小组件系统**

社区开发的“脉搏”标签页仪表盘小组件。每个小组件在 iframe 沙箱中运行 (仅 postMessage)。可以使用 `@clawflag/monitor` 事件，但不能访问 `@clawflag/control` 或 localStorage。提供小组件 SDK + 模板 + 发布机制。

**12.3 开源治理**

第一天：仅 `CONTRIBUTING.md` (5分钟开发环境设置 + PR 约定)。通过 CLA Assistant bot 实现 CLA。`GOVERNANCE.md` 推迟到出现第3个外部贡献者时。
**许可证:** 核心为 MIT，Pro 功能为商业许可证。

## 13. 时间窗口 & “为何是现在”

⚡ **三股力量同时汇合**

这不是“追逐潮流”。三个结构性变化正在同时发生，创造了一个独特的机会窗口：

1.  **安全危机创造了硬需求:** 135K 暴露实例，CVE-2026-25253 一键 RCE，ClawHavoc 824+ 恶意技能，微软安全博客公开警告。用户感到害怕。他们现在就需要一个安全的控制面板。
2.  **创始人离开创造了真空:** Peter Steinberger 加入了 OpenAI (2026年2月14日)。OpenClaw 过渡到基金会。官方迭代放缓。社区对第三方工具的接受度达到顶峰。
3.  **极客玩具 → 生产力工具的拐点:** 188K GitHub stars。《财富》、CNBC、IBM、微软、《经济学人》都在报道。企业正在评估。但没有人为这些用户提供一个安全、移动的管理工具。

**启示：** PWA MVP 必须在 **2–4周** 内发布。必须在 **3–6个月** 的窗口期收窄前建立社区牵引力。

## 14. 竞争防御矩阵

| 竞争对手 | 他们的位置 | ClawFlag 的防御 |
|:---|:---|:---|
| **OpenAI 官方工具** | 可能在 ChatGPT/GPT 产品中构建 Agent 管理 | ClawFlag 是跨框架的 (AutoGen/CrewAI)。OpenAI 不会为竞争对手的框架构建工具。|
| **Clawctl ($49/月)** | 托管 Gateway 服务 | 不同类别：Clawctl 运行你的 Gateway；ClawFlag 监控它。可以共存和集成。|
| **9个社区仪表盘** | 仅 Web，无推送，无安全，无成本智能 | 协议适配器 + 技能护盾 + 移动优先 = 他们不会复制的重度工程。|
| **大型科技公司 (Google/MS)** | 专注于自己的 Agent 平台 | 不会为开源 Agent 框架构建第三方工具。市场对他们来说“太小”= 对创业公司来说完美。|

## 15. 关键风险

| 风险 | 描述 | 缓解措施 |
|:---|:---|:---|
| **平台依赖** | OpenAI 集成 Agent 管理，挤压 OpenClaw 社区 | 第一天就进行跨框架设计。定位为“AI Agent 控制台”而非“OpenClaw 仪表盘”。|
| **API 不稳定** | OpenClaw Gateway 协议每周都在变 | 协议适配器层 + 远程配置 + CodePush 热更新。|
| **安全事件** | 鉴于 Agent 的访问范围，ClawFlag 的漏洞将是灾难性的 | 零存储架构。发布前进行第三方审计。版本化的安全检查清单 API。|
| **Moltbook 阴影** | Moltbook 失败后，Agent 社交被视为“危险” | **【专家建议】** 领先于安全叙事。将网络愿景推迟到第3层。通过工具层建立信任。**跑得更快，做得更深**，专注于官方短期内不会做的“脏活累活”（如深度安全审计、精细化成本优化）。|
| **单一创始人** | 一个人无法持续交付3个层级 | 第1层范围限定为单人开发。在第2层之前寻找联合创始人。通过 SDK 引入社区维护者。|
| **PWA 限制** | iOS：无可靠推送、无小组件、无手表、后台 WebSocket 不可靠 | Telegram Bot 备用通道。清晰的 PWA/原生阶段标签。定义了原生 App 的触发条件。|

## 16. 执行路线图

**第0周 (准备, 2–3天)**

*   注册 GitHub 仓库 (`clawflag/clawflag`) + README 骨架
*   部署自己的 OpenClaw 测试实例作为开发/测试环境
*   手动 `wscat` 会话：记录真实的 Gateway WebSocket 消息格式
*   搭建 React + Vite PWA 项目 + 部署到 clawflag.com
*   在 OpenClaw Discord 发布“正在构建新东西”的预告

**第1–2周 (MVP 发布)**

*   ✔ Gateway 连接 (Token 输入 + WS 握手 + 版本指纹检测)
*   ✔ 概览视图 (3个数字 + 1句话)
*   ✔ 基础对话 (发送/接收 + Markdown 渲染)
*   ✔ 今日成本数字
*   ✔ Gateway 安全检查 (版本 + 公网暴露 + 认证状态)
*   ✔ `claw-audit` 命令行工具一同发布 (安全扫描增长钩子)

**第3–4周 (增强)**

*   ⚡ 成本顾问基础建议 (2条硬编码规则)
*   ⚡ SOUL.md 查看/编辑 (第0–1层)
*   ⚡ 技能列表 + 基础安全评分
*   ⚡ 会话历史列表
*   ⚡ Telegram Bot 推送备用通道 (@ClawFlagBot)
*   ⚡ Agent 统计社交卡片 v1

**第2–3个月 (增长)**

*   🔥 ClawRouter 文本配置
*   🔥 成本异常检测
*   🔥 技能更新差异对比
*   🔥 记忆时间线浏览器
*   🔥 OpenRouter API 集成
*   🔥 Product Hunt 发布

**第4–6个月 (平台化)**

*   🚀 `@clawflag/core` SDK 开源
*   🚀 ClawRouter 拖放式 UI
*   🚀 Pro 版发布 (创始人计划)
*   🚀 多 Agent 切换
*   🚀 每周文摘报告
*   🚀 评估原生 App 触发条件

---

> AI 安全需要人类在环。
> 人类在环需要移动便利性。
> AI 的存在是为了服务于人。

---

### 参考文献

[1] SecurityScorecard STRIKE. (2026, February). *The Rise of Exposed AI Agents: A New Attack Surface*.  
[2] Koi Security. (2026, February). *ClawHavoc IoC Database Update*.  
[3] Microsoft Security Response Center. (2026, February 19). *Guidance for Securing OpenClaw Deployments*.  
[4] Bitdefender Labs. (2026, January). *Threat Report: Malicious Skills in the AI Agent Ecosystem*.  
[5] sherly-techtree. (2026, January 31). *Feature: Agent activity visibility and lifecycle tracking*. GitHub Issue #5541. [https://github.com/openclaw/openclaw/issues/5541](https://github.com/openclaw/openclaw/issues/5541)  
[6] Pawel Jozefiak. (2026, February 19). *My AI Agent Outgrew a Spreadsheet. So I Built It a Dashboard. Then Rebuilt It. Twice*. [https://thoughts.jock.pl/p/wiz-1-5-ai-agent-dashboard-native-app-2026](https://thoughts.jock.pl/p/wiz-1-5-ai-agent-dashboard-native-app-2026)
